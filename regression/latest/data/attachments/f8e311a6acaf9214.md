# Test info

- Name: Room API Tests >> User should get all rooms
- Location: /home/runner/work/playwrightDemoProject/playwrightDemoProject/src/features/api/hotel-room.api.spec.ts:9:7

# Error details

```
Error: expect(received).toEqual(expected) // deep equality

Expected: ArrayContaining [{"accessible": true, "description": "A comfortable single room with modern amenities", "features": ["WiFi", "TV", "Air Conditioning", "Mini Bar"], "image": "https://www.mwtestconsultancy.co.uk/img/room1.png", "roomName": "Single 92765334", "roomPrice": 100, "roomid": 6, "type": "Single"}, {"accessible": true, "description": "A comfortable double room with modern amenities", "features": ["WiFi", "TV", "Air Conditioning", "Mini Bar"], "image": "https://www.mwtestconsultancy.co.uk/img/room1.png", "roomName": "Double 64652486", "roomPrice": 200, "roomid": 7, "type": "Double"}, undefined]
Received: [{"accessible": true, "description": "Aenean porttitor mauris sit amet lacinia molestie. In posuere accumsan aliquet. Maecenas sit amet nisl massa. Interdum et malesuada fames ac ante.", "features": ["TV", "WiFi", "Safe"], "image": "/images/room1.jpg", "roomName": "101", "roomPrice": 100, "roomid": 1, "type": "Single"}, {"accessible": true, "description": "Vestibulum sollicitudin, lectus ac mollis consequat, lorem orci ultrices tellus, eleifend euismod tortor dui egestas erat. Phasellus et ipsum nisl. ", "features": ["TV", "Radio", "Safe"], "image": "/images/room2.jpg", "roomName": "102", "roomPrice": 150, "roomid": 2, "type": "Double"}, {"accessible": true, "description": "Etiam metus metus, fringilla ac sagittis id, consequat vel neque. Nunc commodo quis nisl nec posuere. Etiam at accumsan ex. ", "features": ["Radio", "WiFi", "Safe"], "image": "/images/room3.jpg", "roomName": "103", "roomPrice": 225, "roomid": 3, "type": "Suite"}, {"accessible": false, "description": "Please enter a description for this room", "features": ["WiFi", "Radio", "Safe"], "image": "https://www.mwtestconsultancy.co.uk/img/room1.jpg", "roomName": "22", "roomPrice": 90, "roomid": 4, "type": "Single"}, {"accessible": false, "description": "Please enter a description for this room", "features": ["WiFi", "Radio", "Safe"], "image": "https://www.mwtestconsultancy.co.uk/img/room1.jpg", "roomName": "33", "roomPrice": 100, "roomid": 5, "type": "Single"}, {"accessible": true, "description": "A comfortable single room with modern amenities", "features": ["WiFi", "TV", "Air Conditioning", "Mini Bar"], "image": "https://www.mwtestconsultancy.co.uk/img/room1.png", "roomName": "Single 92765334", "roomPrice": 100, "roomid": 6, "type": "Single"}, {"accessible": true, "description": "A comfortable double room with modern amenities", "features": ["WiFi", "TV", "Air Conditioning", "Mini Bar"], "image": "https://www.mwtestconsultancy.co.uk/img/room1.png", "roomName": "Double 64652486", "roomPrice": 200, "roomid": 7, "type": "Double"}]
    at /home/runner/work/playwrightDemoProject/playwrightDemoProject/src/features/api/hotel-room.api.spec.ts:33:26
    at /home/runner/work/playwrightDemoProject/playwrightDemoProject/src/features/api/hotel-room.api.spec.ts:32:18
```

# Test source

```ts
   1 | import { expect } from "@playwright/test";
   2 | import { test } from "../test-base";
   3 | import { Room } from "../../types/types";
   4 | import { admin } from "../../config/auth.config";
   5 | import { getRandomDigits } from "../../utils/randomizer";
   6 | import { AxiosResponse } from "axios";
   7 |
   8 | test.describe("Room API Tests", () => {
   9 |   test(
   10 |     "User should get all rooms",
   11 |     { tag: ["@smoke", "@regression"] },
   12 |     async ({ roomApiHelper: roomApi, authHelper, registerCleanup }) => {
   13 |       let allRooms: Room[];
   14 |       let createdRoom1: Room, createdRoom2: Room, createdRoom3: Room;
   15 |
   16 |       await test.step("Given I have three rooms", async () => {
   17 |         const roomSample1 = roomApi.sample(`Single ${getRandomDigits(8)}`, "Single");
   18 |         const roomSample2 = roomApi.sample(`Double ${getRandomDigits(8)}`, "Double");
   19 |         const roomSample3 = roomApi.sample(`Suite ${getRandomDigits(8)}`, "Suite");
   20 |
   21 |         await authHelper.login_as(admin);
   22 |         createdRoom1 = await roomApi.createRoom(roomSample1);
   23 |         createdRoom2 = await roomApi.createRoom(roomSample2);
   24 |         createdRoom3 = await roomApi.createRoom(roomSample3);
   25 |         await authHelper.logout();
   26 |       });
   27 |
   28 |       await test.step("When I retrieve all rooms", async () => {
   29 |         allRooms = await roomApi.getAllRooms();
   30 |       });
   31 |
   32 |       await test.step("Then I should see all three rooms", async () => {
>  33 |         expect(allRooms).toEqual(expect.arrayContaining([createdRoom1, createdRoom2, createdRoom3]));
      |                          ^ Error: expect(received).toEqual(expected) // deep equality
   34 |       });
   35 |
   36 |       registerCleanup([
   37 |         { type: "room", data: createdRoom1 },
   38 |         { type: "room", data: createdRoom2 },
   39 |         { type: "room", data: createdRoom3 },
   40 |       ]);
   41 |     }
   42 |   );
   43 |
   44 |   test(
   45 |     "User should get a specific room by ID",
   46 |     { tag: "@regression" },
   47 |     async ({ roomApiHelper: roomApi, authHelper, registerCleanup }) => {
   48 |       let createdRoom: Room, retrievedRoom: Room;
   49 |
   50 |       await test.step("Given I have a room", async () => {
   51 |         await authHelper.login_as(admin);
   52 |         const roomSample = roomApi.sample(`Double ${getRandomDigits(8)}`, "Double");
   53 |         createdRoom = await roomApi.createRoom(roomSample);
   54 |         await authHelper.logout();
   55 |       });
   56 |
   57 |       await test.step("When I retrieve the room by ID", async () => {
   58 |         retrievedRoom = await roomApi.getRoomById(createdRoom.roomid);
   59 |       });
   60 |
   61 |       await test.step("Then I should see get all room details", async () => {
   62 |         expect(retrievedRoom).toStrictEqual(createdRoom);
   63 |       });
   64 |
   65 |       registerCleanup({ type: "room", data: createdRoom });
   66 |     }
   67 |   );
   68 |
   69 |   test("User should not get a non-existent room by ID", async ({ roomApiHelper: roomApi }) => {
   70 |     let response: AxiosResponse<Room>;
   71 |     let nonExistentId: number;
   72 |
   73 |     await test.step("Given I have a non-existent room ID", async () => {
   74 |       nonExistentId = 99999;
   75 |     });
   76 |
   77 |     await test.step("When I retrieve the room by ID", async () => {
   78 |       response = await roomApi.getRoomByIdRaw(nonExistentId);
   79 |     });
   80 |
   81 |     await test.step("Then I should see an error", async () => {
   82 |       expect(response.status).toEqual(500);
   83 |     });
   84 |   });
   85 |
   86 |   test("User should create a new room", async ({ roomApiHelper: roomApi, authHelper, registerCleanup }) => {
   87 |     let roomParams: Room, createdRoom: Room;
   88 |
   89 |     await test.step("Given I have a room parameters", async () => {
   90 |       roomParams = roomApi.sample(`Single ${getRandomDigits(8)}`, "Single");
   91 |     });
   92 |
   93 |     await test.step("When I create the room with the parameters", async () => {
   94 |       await authHelper.login_as(admin);
   95 |       createdRoom = await roomApi.createRoom(roomParams);
   96 |       await authHelper.logout();
   97 |     });
   98 |
   99 |     await test.step("Then created room should have the same parameters", async () => {
  100 |       expect(createdRoom).toEqual(
  101 |         expect.objectContaining({
  102 |           roomName: roomParams.roomName,
  103 |           type: roomParams.type,
  104 |           accessible: roomParams.accessible,
  105 |           description: roomParams.description,
  106 |           features: roomParams.features,
  107 |           image: roomParams.image,
  108 |           roomPrice: roomParams.roomPrice,
  109 |         })
  110 |       );
  111 |     });
  112 |
  113 |     registerCleanup({ type: "room", data: createdRoom });
  114 |   });
  115 |
  116 |   test("Admin should update an existing room", async ({ roomApiHelper: roomApi, authHelper, registerCleanup }) => {
  117 |     let createdRoom: Room, updatedRoom: Room, updatedParams: Room;
  118 |
  119 |     await test.step("Given I have a room", async () => {
  120 |       await authHelper.login_as(admin);
  121 |       const roomParams = roomApi.sample(`Double ${getRandomDigits(8)}`, "Double");
  122 |       createdRoom = await roomApi.createRoom(roomParams);
  123 |     });
  124 |
  125 |     await test.step("When I update the room", async () => {
  126 |       updatedParams = { ...createdRoom, description: `Updated description ${getRandomDigits(8)}` };
  127 |       updatedRoom = await roomApi.updateRoom(updatedParams.roomid, updatedParams);
  128 |     });
  129 |
  130 |     await test.step("Then updated room should have updated parameters", async () => {
  131 |       expect(updatedRoom).toStrictEqual(updatedParams);
  132 |     });
  133 |
```
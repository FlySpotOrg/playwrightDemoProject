# Test info

- Name: Room Tests >> User should get all rooms
- Location: /home/runner/work/playwrightDemoProject/playwrightDemoProject/src/features/api/hotel-room.api.spec.ts:10:7

# Error details

```
Error: expect(received).toEqual(expected) // deep equality

Expected: ArrayContaining [undefined, {"accessible": true, "description": "A comfortable double room with modern amenities", "features": ["WiFi", "TV", "Air Conditioning", "Mini Bar"], "image": "https://www.mwtestconsultancy.co.uk/img/room1.png", "roomName": "Double 56129442", "roomPrice": 200, "roomid": 12, "type": "Double"}, {"accessible": true, "description": "A comfortable suite room with modern amenities", "features": ["WiFi", "TV", "Air Conditioning", "Mini Bar"], "image": "https://www.mwtestconsultancy.co.uk/img/room1.png", "roomName": "Suite 49655826", "roomPrice": 300, "roomid": 13, "type": "Suite"}]
Received: [{"accessible": true, "description": "Aenean porttitor mauris sit amet lacinia molestie. In posuere accumsan aliquet. Maecenas sit amet nisl massa. Interdum et malesuada fames ac ante.", "features": ["TV", "WiFi", "Safe"], "image": "/images/room1.jpg", "roomName": "101", "roomPrice": 100, "roomid": 1, "type": "Single"}, {"accessible": true, "description": "Vestibulum sollicitudin, lectus ac mollis consequat, lorem orci ultrices tellus, eleifend euismod tortor dui egestas erat. Phasellus et ipsum nisl. ", "features": ["TV", "Radio", "Safe"], "image": "/images/room2.jpg", "roomName": "102", "roomPrice": 150, "roomid": 2, "type": "Double"}, {"accessible": true, "description": "Etiam metus metus, fringilla ac sagittis id, consequat vel neque. Nunc commodo quis nisl nec posuere. Etiam at accumsan ex. ", "features": ["Radio", "WiFi", "Safe"], "image": "/images/room3.jpg", "roomName": "103", "roomPrice": 225, "roomid": 3, "type": "Suite"}, {"accessible": false, "description": "Please enter a description for this room", "features": ["WiFi"], "image": "https://www.mwtestconsultancy.co.uk/img/room1.jpg", "roomName": "52", "roomPrice": 53, "roomid": 8, "type": "Single"}, {"accessible": true, "description": "Aenean porttitor mauris sit amet lacinia molestie. In posuere accumsan aliquet. Maecenas sit amet nisl massa. Interdum et malesuada fames ac ante.", "features": ["TV", "WiFi", "Safe"], "image": "/images/room1.jpg", "roomName": "777", "roomPrice": 10, "roomid": 9, "type": "Single"}, {"accessible": true, "description": "A comfortable double room with modern amenities", "features": ["WiFi", "TV", "Air Conditioning", "Mini Bar"], "image": "https://www.mwtestconsultancy.co.uk/img/room1.png", "roomName": "Double 73225776", "roomPrice": 200, "roomid": 10, "type": "Double"}, {"accessible": true, "description": "A comfortable suite room with modern amenities", "features": ["WiFi", "TV", "Air Conditioning", "Mini Bar"], "image": "https://www.mwtestconsultancy.co.uk/img/room1.png", "roomName": "Suite 54397603", "roomPrice": 300, "roomid": 11, "type": "Suite"}, {"accessible": true, "description": "A comfortable double room with modern amenities", "features": ["WiFi", "TV", "Air Conditioning", "Mini Bar"], "image": "https://www.mwtestconsultancy.co.uk/img/room1.png", "roomName": "Double 56129442", "roomPrice": 200, "roomid": 12, "type": "Double"}, {"accessible": true, "description": "A comfortable suite room with modern amenities", "features": ["WiFi", "TV", "Air Conditioning", "Mini Bar"], "image": "https://www.mwtestconsultancy.co.uk/img/room1.png", "roomName": "Suite 49655826", "roomPrice": 300, "roomid": 13, "type": "Suite"}]
    at /home/runner/work/playwrightDemoProject/playwrightDemoProject/src/features/api/hotel-room.api.spec.ts:34:26
    at /home/runner/work/playwrightDemoProject/playwrightDemoProject/src/features/api/hotel-room.api.spec.ts:33:18
```

# Test source

```ts
   1 | import { expect } from "@playwright/test";
   2 | import { test } from "../test-base";
   3 | import { Room } from "../../types/types";
   4 | import { admin } from "../../config/auth.config";
   5 | import { getRandomDigits } from "../../utils/randomizer";
   6 | import { AxiosResponse } from "axios";
   7 |
   8 | test.describe("Room Tests", 
   9 |   { tag: ["@neevadmin", "@API"] },() => {
   10 |   test(
   11 |     "User should get all rooms",
   12 |     { tag: ["@smoke", "@regression", "@new"] },
   13 |     async ({ roomApiHelper: roomApi, authHelper, registerCleanup }) => {
   14 |       let allRooms: Room[];
   15 |       let createdRoom1: Room, createdRoom2: Room, createdRoom3: Room;
   16 |
   17 |       await test.step("Given I have three rooms", async () => {
   18 |         const roomSample1 = roomApi.sample(`Single ${getRandomDigits(8)}`, "Single2");
   19 |         const roomSample2 = roomApi.sample(`Double ${getRandomDigits(8)}`, "Double");
   20 |         const roomSample3 = roomApi.sample(`Suite ${getRandomDigits(8)}`, "Suite");
   21 |
   22 |         await authHelper.login_as(admin);
   23 |         createdRoom1 = await roomApi.createRoom(roomSample1);
   24 |         createdRoom2 = await roomApi.createRoom(roomSample2);
   25 |         createdRoom3 = await roomApi.createRoom(roomSample3);
   26 |         await authHelper.logout();
   27 |       });
   28 |
   29 |       await test.step("When I retrieve all rooms", async () => {
   30 |         allRooms = await roomApi.getAllRooms();
   31 |       });
   32 |
   33 |       await test.step("Then I should see all three rooms", async () => {
>  34 |         expect(allRooms).toEqual(expect.arrayContaining([createdRoom1, createdRoom2, createdRoom3]));
      |                          ^ Error: expect(received).toEqual(expected) // deep equality
   35 |       });
   36 |
   37 |       registerCleanup([
   38 |         { type: "room", data: createdRoom1 },
   39 |         { type: "room", data: createdRoom2 },
   40 |         { type: "room", data: createdRoom3 },
   41 |       ]);
   42 |     }
   43 |   );
   44 |
   45 |   test(
   46 |     "User should get a specific room by ID",
   47 |     { tag: ["@regression"] },
   48 |     async ({ roomApiHelper: roomApi, authHelper, registerCleanup }) => {
   49 |       let createdRoom: Room, retrievedRoom: Room;
   50 |
   51 |       await test.step("Given I have a room", async () => {
   52 |         await authHelper.login_as(admin);
   53 |         const roomSample = roomApi.sample(`Double ${getRandomDigits(8)}`, "Double");
   54 |         createdRoom = await roomApi.createRoom(roomSample);
   55 |         await authHelper.logout();
   56 |       });
   57 |
   58 |       await test.step("When I retrieve the room by ID", async () => {
   59 |         retrievedRoom = await roomApi.getRoomById(createdRoom.roomid);
   60 |       });
   61 |
   62 |       await test.step("Then I should see get all room details", async () => {
   63 |         expect(retrievedRoom).toStrictEqual(createdRoom);
   64 |       });
   65 |
   66 |       registerCleanup({ type: "room", data: createdRoom });
   67 |     }
   68 |   );
   69 |
   70 |   test("User should not get a non-existent room by ID",
   71 |     { tag: ["@smoke"] },
   72 |      async ({ roomApiHelper: roomApi }) => {
   73 |     let response: AxiosResponse<Room>;
   74 |     let nonExistentId: number;
   75 |
   76 |     await test.step("Given I have a non-existent room ID", async () => {
   77 |       nonExistentId = 99999;
   78 |     });
   79 |
   80 |     await test.step("When I retrieve the room by ID", async () => {
   81 |       response = await roomApi.getRoomByIdRaw(nonExistentId);
   82 |     });
   83 |
   84 |     await test.step("Then I should see an error", async () => {
   85 |       expect(response.status).toEqual(500);
   86 |     });
   87 |   });
   88 |
   89 |   test("User should create a new room",
   90 |     { tag: ["@smoke"] },
   91 |     async ({ roomApiHelper: roomApi, authHelper, registerCleanup }) => {
   92 |     let roomParams: Room, createdRoom: Room;
   93 |
   94 |     await test.step("Given I have a room parameters", async () => {
   95 |       roomParams = roomApi.sample(`Single ${getRandomDigits(8)}`, "Single");
   96 |     });
   97 |
   98 |     await test.step("When I create the room with the parameters", async () => {
   99 |       await authHelper.login_as(admin);
  100 |       createdRoom = await roomApi.createRoom(roomParams);
  101 |       await authHelper.logout();
  102 |     });
  103 |
  104 |     await test.step("Then created room should have the same parameters", async () => {
  105 |       expect(createdRoom).toEqual(
  106 |         expect.objectContaining({
  107 |           roomName: roomParams.roomName,
  108 |           type: roomParams.type,
  109 |           accessible: roomParams.accessible,
  110 |           description: roomParams.description,
  111 |           features: roomParams.features,
  112 |           image: roomParams.image,
  113 |           roomPrice: roomParams.roomPrice,
  114 |         })
  115 |       );
  116 |     });
  117 |
  118 |     registerCleanup({ type: "room", data: createdRoom });
  119 |   });
  120 |
  121 |   test("Admin should update an existing room",
  122 |     { tag: ["@smoke"] }, async ({ roomApiHelper: roomApi, authHelper, registerCleanup }) => {
  123 |     let createdRoom: Room, updatedRoom: Room, updatedParams: Room;
  124 |
  125 |     await test.step("Given I have a room", async () => {
  126 |       await authHelper.login_as(admin);
  127 |       const roomParams = roomApi.sample(`Double ${getRandomDigits(8)}`, "Double");
  128 |       createdRoom = await roomApi.createRoom(roomParams);
  129 |     });
  130 |
  131 |     await test.step("When I update the room", async () => {
  132 |       updatedParams = { ...createdRoom, description: `Updated description ${getRandomDigits(8)}` };
  133 |       updatedRoom = await roomApi.updateRoom(updatedParams.roomid, updatedParams);
  134 |     });
```